(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],u=0,h=[];u<r.length;u++)i=r[u],s[i]&&h.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/yuzu-def-ui/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"07a4":function(t,e,a){"use strict";var n=a("2b0e"),s=a("2f62"),o=function(){var t=["Blocks","Context"];return"localhost"===location.hostname&&t.push("Data"),t},i={namespaced:!0,state:{items:o(),context:"Context"},mutations:{setCurrent:function(t,e){t.context=e}}},r=(a("7f7f"),a("ac6a"),a("456d"),a("d722")),l=a("c6e4"),c=a("2ef0"),d=a.n(c),u={namespaced:!0,state:{items:{},current:{}},mutations:{load:function(t,e){t.items=e},setCurrent:function(t,e){t.current=e}},actions:{load:function(t){r["a"].getPreviews().then(function(e){var a=e.data;t.commit("load",a);var n=l["a"].getRoute(),s={};l["a"].getBlockAndState(a,n,s),!s.state&&a.pages&&(n=d.a.first(Object.keys(a.pages)),l["a"].getBlockAndState(a,n,s)),t.commit("setCurrent",s.block),t.commit("state/setCurrent",s.state,{root:!0}),t.dispatch("data/load",s.state.name,{root:!0}),t.dispatch("schema/load",s.block.name,{root:!0}),t.dispatch("state/loadAll",s.state.name,{root:!0})})}}},h=(a("7514"),function(t){return t==l["a"].defaultFromState(t)?"default":l["a"].getStateSuffix(t)}),m={namespaced:!0,state:{items:[]},mutations:{loadStates:function(t,e){t.items.push(e)},addState:function(t,e){d.a.each(t.items,function(t){t.block===e.block&&t.states.push(e.state)})}},getters:{has:function(t){return function(e){return d.a.find(t.items,function(t){return t.block==e})}},get:function(t){return function(e){var a=d.a.chain(t.items).filter(function(t){return t.block==e}).first().value();return a?a.states:[]}}},actions:{loadStates:function(t,e){if(!t.getters.has(e.block)){var a=[],n={};l["a"].getBlockAndState(t.rootState.blocks.items,e.state,n),Object.keys(n.block.states).forEach(function(t){a.push({name:h(t),value:t})});var s={block:e.block,states:a};t.commit("loadStates",s)}},addNewState:function(t,e){var a={name:e.name,value:e.value};e={block:e.block,state:a};t.commit("addState",e)}}},f={namespaced:!0,state:{current:{},objectSetttings:{},items:[]},getters:{previewUrlToDataPath:function(t){var e=l["a"].convertPreviewToDataPath(t.current.url);return e},convertToRefs:function(t){var e={};return t.items.forEach(function(t){e[t.name]=t.state}),e},has:function(t){return function(e){return _.find(t.items,function(t){return t.name==e})}},get:function(t){return function(e){var a=_.chain(t.items).filter(function(t){return t.name==e}).first().value();return a?a.state:[]}}},mutations:{setCurrent:function(t,e){t.current=e},load:function(t,e){t.items=e.items},add:function(t,e){t.items.push(e)},update:function(t,e){t.items.forEach(function(t){t.name==e.name&&(t.state=e.state)})}},actions:{loadAll:function(t,e){e&&r["a"].getChildStates(e).then(function(e){t.commit("load",e.data)})},load:function(t,e){t.getters["has"](e)||r["a"].get(e).then(function(a){t.commit("add",{name:e,state:a.data})})},add:function(t,e){t.commit("add",e)},update:function(t,e){t.commit("update",e)}}},p={namespaced:!0,state:{root:{},refs:{}},mutations:{load:function(t,e){t.root=e},save:function(t,e){t.root=e}},actions:{load:function(t,e){e&&r["a"].get(e).then(function(e){t.commit("load",e.data)})},save:function(t,e){t.commit("save",e)}}},b=(a("28a5"),{namespaced:!0,state:{data:[],areLoading:[]},mutations:{load:function(t,e){t.data.push(e)},addIsLoading:function(t,e){t.areLoading.push(e)},removeIsLoading:function(t,e){d.a.remove(t.areLoading,function(t){return t==e})}},getters:{hasForBlock:function(t){return function(e){var a=d.a.some(t.data,function(t){return t.block==e});if(a)return!0;var n=d.a.some(t.areLoading,function(t){return t==e});return n}},has:function(t){return function(e,a,n,s){if(n=l["a"].addPrefix(n),s){var o=d.a.some(t.data,function(t){return t.block==e&&t.data[s]&&t.data[s][a].hasOwnProperty(n)});if(o)return!0}return d.a.some(t.data,function(t){return t.block==e&&t.data[a]&&t.data[a].hasOwnProperty(n)})}},get:function(t){return function(e,a,n,s){e=d.a.find(t.data,function(t){return t.block==e});return e?s&&e.data[s]?e.data[s][a]["/"+n]:e.data[a]?e.data[a]["/"+n]:void 0:[]}},getOfType:function(t,e){return function(t){var a=e.get(t.block,"refs",t.path);if(a&&a.length>0){var n=a[0].split("^");return n.length>1?n[1]:""}return""}}},actions:{load:function(t,e){e=l["a"].removePrefix(e),t.getters["hasForBlock"](e)||(t.commit("addIsLoading",e),r["a"].getRefPaths(e).then(function(a){t.commit("load",{block:e,data:a.data}),t.commit("removeIsLoading",e)}))}}}),v=(a("ac4d"),a("8a81"),{namespaced:!0,state:{guesses:["type","title","placeholder","label"]},actions:{get:function(t,e){var a=!0,n=!1,s=void 0;try{for(var o,i=t.state.guesses[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var r=o.value;if(e.item.hasOwnProperty(r)&&e.item[r]){e.action(r,e.item);break}}}catch(l){n=!0,s=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw s}}}}}),g=(a("386d"),a("3b2b"),a("a481"),function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=a.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}),k={namespaced:!0,state:{id:""},mutations:{setup:function(t,e){t.id=e}},actions:{setup:function(t){var e=window.location.search,a=g("wsId",e);a||(a=0),t.commit("setup",a)}}};n["a"].use(s["a"]);e["a"]=new s["a"].Store({state:{toPreview:!1,packageVersion:"2.0.0"},mutations:{triggerPreview:function(t){t.toPreview=!0},resetPreview:function(t){t.toPreview=!1}},getters:{appVersion:function(t){return t.packageVersion}},actions:{},modules:{nav:i,blocks:u,blockStates:m,state:f,data:p,schema:b,itemTitle:v,ws:k}})},"0b1c":function(t,e,a){"use strict";var n=a("1d68"),s=a.n(n);s.a},"148c":function(t,e,a){"use strict";var n=a("8329"),s=a.n(n);s.a},1655:function(t,e,a){"use strict";var n=a("5882"),s=a.n(n);s.a},1739:function(t,e,a){},1867:function(t,e,a){},"190b":function(t,e,a){},"1cde":function(t,e,a){"use strict";var n=a("cb50"),s=a.n(n);s.a},"1d68":function(t,e,a){},"21bc":function(t,e,a){},"22f6":function(t,e,a){"use strict";var n=a("ef2e"),s=a.n(n);s.a},"275f":function(t,e,a){"use strict";var n=a("8fda"),s=a.n(n);s.a},"2dc8":function(t,e,a){"use strict";var n=a("5457"),s=a.n(n);s.a},"3c41":function(t,e,a){"use strict";var n=a("f477"),s=a.n(n);s.a},4169:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modal"},[a("div",{staticClass:"modal__content"},[a("div",{staticClass:"modal__header"},[a("div",{staticClass:"modal__header__text"},[t._t("header-text")],2),a("button",{staticClass:"modal__header__close",on:{click:function(e){return t.$emit("close")}}},[a("svg",{staticClass:"modal__header__close__icon feather"},[a("use",{attrs:{"xlink:href":"#x"}})]),a("span",{staticClass:"modal__header__close__text"},[t._v("Close")])])]),a("div",{staticClass:"modal__body"},[t._t("content"),t._t("default")],2),a("div",{staticClass:"modal__footer"},[t._t("footer",[a("button",{staticClass:"modal__button modal__button--default",on:{click:function(e){return t.$emit("ok")}}},[t._v("Ok")]),a("button",{staticClass:"modal__button modal__button--red",on:{click:function(e){return t.$emit("cancel")}}},[t._v("Cancel")])])],2)])])},s=[],o={name:"modal",data:function(){return{}},methods:{}},i=o,r=(a("148c"),a("2877")),l=Object(r["a"])(i,n,s,!1,null,null,null);e["a"]=l.exports},"4a6d":function(t,e,a){},"4ae8":function(t,e,a){},"4dee":function(t,e,a){"use strict";var n=a("1739"),s=a.n(n);s.a},"51b0":function(t,e,a){"use strict";var n=a("21bc"),s=a.n(n);s.a},5457:function(t,e,a){},5624:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"text-editor",class:"text-editor--depth-"+t.depth},[t.label?[t.isTextArea?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.item[t.label],expression:"item[label]"}],staticClass:"text-editor__control text-editor__control--text",attrs:{type:"text",list:t.isImageSrc?t.uId:""},domProps:{value:t.item[t.label]},on:{focus:t.populateImages,blur:function(e){return t.evaluateLength(t.item[t.label])},input:function(e){e.target.composing||t.$set(t.item,t.label,e.target.value)}}}),t.isTextArea?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item[t.label],expression:"item[label]"}],staticClass:"text-editor__control text-editor__control--textarea",attrs:{list:t.isImageSrc?t.uId:""},domProps:{value:t.item[t.label]},on:{focus:t.populateImages,blur:function(e){return t.evaluateLength(t.item[t.label])},input:function(e){e.target.composing||t.$set(t.item,t.label,e.target.value)}}}):t._e(),a("span",{staticClass:"text-editor__label"},[t._v("\n      "+t._s(t.label)+"\n    ")]),t.isImageSrc?a("datalist",{attrs:{id:t.uId}},t._l(t.images,function(t){return a("option",{key:t,domProps:{value:t}})}),0):t._e()]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item[t.index],expression:"item[index]"}],staticClass:"text-editor__control text-editor__control--text",attrs:{type:"text"},domProps:{value:t.item[t.index]},on:{input:function(e){e.target.composing||t.$set(t.item,t.index,e.target.value)}}})],a("svg",{staticClass:"text-editor__icon feather"},[a("use",{attrs:{"xlink:href":"#edit-2"}})]),t._t("arrayActions")],2)},s=[],o=(a("28a5"),a("d722")),i={name:"json-data-text",data:function(){return{isImageSrc:!1,uId:this.generateId(),isTextArea:!1,images:[]}},mounted:function(){this.evaluateLength(),this.checkIfImageSrc()},methods:{checkIfImageSrc:function(){this.isImageSrc="src"===this.label},generateId:function(){return Math.random()},evaluateLength:function(){var t=String(this.item[this.label]),e=t.length,a=t.split(" ").length;this.isTextArea=a>=25||e>=150},populateImages:function(){var t=this;this.isImageSrc&&(this.images=o["a"].getImages().then(function(e){t.images=e.data}))}},props:["label","index","item","depth","path"]},r=i,l=(a("1655"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"f8437a8a",null);e["default"]=c.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",attrs:{id:"app"}},[a("tabs"),a("div",{staticClass:"version-number"},[t._v("v"+t._s(t.$store.getters.appVersion))])],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabs"},[a("nav",{staticClass:"tabs__nav"},t._l(t.navItems,function(e){return a("a",{key:e,staticClass:"tabs__nav__item",class:{"is-active":t.isInContext(t.navContext,e)},on:{click:function(a){return t.setNavContext(e)}}},[a("svg",{staticClass:"tabs__nav__item__icon feather",class:["tabs__nav__item__icon--"+e.toLowerCase().split(" ").join("-")]},[a("use",{attrs:{"xlink:href":"#"+t.icon(e)}})]),a("span",{staticClass:"tabs__nav__item__text"},[t._v("\n        "+t._s(e)+"\n      ")])])}),0),t.navContext===t.navItems[0]?a("section",{staticClass:"tabs__section"},[a("tree-menu")],1):t._e(),t.navContext===t.navItems[1]?a("section",{staticClass:"tabs__section"},[a("states")],1):t._e(),t.navContext===t.navItems[2]?a("section",{staticClass:"tabs__section"},[a("json-data-editor")],1):t._e()])},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-menu"},[a("label",{staticClass:"tree-menu__search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"tree-menu__search__control",class:{"is-dirty":t.searchTerm.length>0},attrs:{type:"search",placeholder:"Search blocks/pages"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),a("span",{staticClass:"tree-menu__search__label"},[t._v("Search blocks/pages")]),a("svg",{staticClass:"tree-menu__search__icon feather"},[a("use",{attrs:{"xlink:href":"#search"}})])]),t.searchTerm.length>0?[a("p",{staticClass:"tree-menu__search-message"},[this.filteredItemsLength>0?[t._v("\n        Showing results for "),a("span",{staticClass:"tree-menu__search-message__term"},[t._v('"'+t._s(t.searchTerm)+'"')])]:[t._v("\n        No blocks/pages found\n      ")]],2)]:t._e(),t._l(t.items,function(t,e,n){return a("ul",{key:e,staticClass:"tree-menu__list"},[a("tree-menu-item",{class:"tree-menu-item--root",attrs:{value:t,propertyname:e,index:n,depth:0}})],1)})],2)},c=[],d=(a("6762"),a("2fdb"),a("6b54"),a("7618")),u=(a("55dd"),a("ac6a"),a("456d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"tree-menu-item"},[t.isFolder(t.value)?[a("a",{staticClass:"tree-menu-item__parent",style:{"padding-left":t.depth+1+"rem"},on:{click:t.toggleChildren}},[a("svg",{staticClass:"tree-menu-item__parent__icon feather",class:{"is-hidden":!t.showChildren}},[a("use",{attrs:{"xlink:href":"#minus-square"}})]),a("svg",{staticClass:"tree-menu-item__parent__icon feather",class:{"is-hidden":t.showChildren}},[a("use",{attrs:{"xlink:href":"#plus-square"}})]),a("span",{staticClass:"tree-menu-item__parent__text"},[t._v("\n        "+t._s(t.propertyname)+"\n      ")])]),t._l(t.value,function(e,n){return a("ul",{key:n,staticClass:"tree-menu-item__parent__list",class:{"is-active":t.showChildren}},[a("tree-menu-item",{attrs:{value:e,propertyname:n,index:t.index,depth:t.depth+1}})],1)})]:[a("a",{staticClass:"tree-menu-item__child",style:{"padding-left":t.depth+1+"rem"},on:{click:function(e){return t.selectItem(t.propertyname,t.value)}}},[t._v("\n      "+t._s(t.propertyname)+"\n    ")])]],2)}),h=[],m={name:"tree-menu-item",data:function(){return{showChildren:!0}},mounted:function(){this.showChildren=0==this.depth},methods:{isFolder:function(t){var e=Object.keys(t)[0];return"[object Object]"===Object.prototype.toString.call(t[e])},toggleChildren:function(){this.showChildren=!this.showChildren},selectItem:function(t,e){var a={name:t,states:e};this.$store.commit("blocks/setCurrent",a),this.$store.commit("nav/setCurrent","Context")}},props:["value","propertyname","index","depth"]},f=m,p=(a("61ad"),a("2877")),_=Object(p["a"])(f,u,h,!1,null,"f263ddd8",null),b=_.exports,v={name:"tree-menu",data:function(){return{searchTerm:""}},computed:{items:function(){return this.searchTerm.length>0?this.filteredItems:this.unfilteredItems},unfilteredItems:function(){return this.sortObject(this.$store.state.blocks.items,"desc")},filteredItems:function(){return this.filterItems(this.unfilteredItems)},filteredItemsLength:function(){return Object.keys(this.filteredItems).length}},methods:{sortObject:function(t,e){var a={},n=Object.keys(t);for(var s in n.sort(function(t,a){if(t=t.toLowerCase(),a=a.toLowerCase(),"asc"==e){if(t<a)return-1;if(t>a)return 1}else if("desc"==e){if(t<a)return 1;if(t>a)return-1}return 0}),n){var o=n[s];"object"!=Object(d["a"])(t[o])||t[o]instanceof Array?a[o]=t[o]:a[o]=this.sortObject(t[o],"asc")}return a},filterItems:function(t){var e={},a=Object.keys(t);for(var n in a){var s=a[n],o=t[s],i=Object.keys(o)[0];if("[object Object]"===Object.prototype.toString.call(o[i])){var r=this.filterItems(o);Object.keys(r).length>0&&(e[s]=r)}else s.toLowerCase().includes(this.searchTerm.toLowerCase())&&(e[s]=o)}return e}},components:{TreeMenuItem:b}},g=v,k=(a("1cde"),Object(p["a"])(g,l,c,!1,null,"204124a9",null)),y=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.block?a("div",{staticClass:"states"},[a("h2",{staticClass:"states__title"},[t._v(t._s(t.block.name))]),a("ul",{staticClass:"states__list"},t._l(t.block.states,function(e,n){return a("li",{key:n,staticClass:"states__list__item"},[a("a",{staticClass:"states__list__link",class:{"is-active":n==t.state.name},attrs:{target:"_top",href:t.href(e)}},[t._v("\n      "+t._s(n))])])}),0)]):t._e()},x=[],w={name:"states",computed:{block:function(){return this.$store.state.blocks.current},state:function(){return this.$store.state.state.current}},methods:{href:function(t){return"/"+t}}},P=w,S=(a("3c41"),Object(p["a"])(P,C,x,!1,null,"008b8602",null)),O=S.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data?a("div",{staticClass:"root-editor"},[a("div",{staticClass:"root-editor__buttons"},[a("button",{staticClass:"root-editor__button root-editor__button--new",on:{click:t.toggleAddStateModal}},[a("svg",{staticClass:"root-editor__button__icon feather"},[a("use",{attrs:{"xlink:href":"#copy"}})]),a("span",{staticClass:"root-editor__button__text"},[t._v("Create new")])]),a("button",{staticClass:"root-editor__button root-editor__button--save",on:{click:t.toggleSaveModal}},[a("svg",{staticClass:"root-editor__button__icon feather"},[a("use",{attrs:{"xlink:href":"#save"}})]),a("span",{staticClass:"root-editor__button__text"},[t._v("Save state")])]),t.addStateModal.isOpen?a("modal-root-add-state",{attrs:{isValid:t.addStateModal.isValid,validateFunction:t.stateNameIsValid,addFunction:t.addNew,cancelFunction:t.toggleAddStateModal}}):t._e(),t.saveModal.isOpen?a("modal-root-save-state",{attrs:{saveFunction:t.save,cancelFunction:t.toggleSaveModal}}):t._e()],1),a("json-data-property",{class:"property-editor--root",attrs:{item:t.data,depth:1,absPath:t.initialPath,relPath:t.initialPath,blockName:t.block.name}}),a("div",{staticClass:"root-editor__help"},[a("svg",{staticClass:"root-editor__help__icon feather"},[a("use",{attrs:{"xlink:href":"#help-circle"}})]),a("p",{staticClass:"root-editor__help__text"},[t._v("Is there a missing property that's in the schema but not editable here? Add it to the JSON state manually and it will appear.")])])],1):t._e()},I=[],N=a("cebc"),A=(a("7f7f"),a("d722")),B=a("c6e4"),$=a("2ef0"),T=a.n($),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal-root-save-state",on:{close:t.cancelFunction}},[a("template",{slot:"header-text"},[a("h2",[t._v("Confirm save")])]),a("template",{slot:"content"},[a("p",[t._v("Do you want to overwrite the current state?")]),a("p",[a("strong",[t._v("WARNING:")]),t._v(" Any changes within sub-blocks will cause their appropriate state to be overwritten with the content in this current state!")])]),a("template",{slot:"footer"},[a("button",{staticClass:"modal__button modal__button--green",on:{click:t.saveFunction}},[t._v("Confirm")]),a("button",{staticClass:"modal__button modal__button--red",on:{click:t.cancelFunction}},[t._v("Cancel")])])],2)},F=[],E=a("4169"),R={name:"modal-root-save-state",components:{Modal:E["a"]},props:["saveFunction","cancelFunction"]},D=R,L=(a("9c3e"),Object(p["a"])(D,M,F,!1,null,"66088cfb",null)),V=L.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal-root-add-state",on:{close:function(e){t.cancelFunction(),t.reset()}}},[a("template",{slot:"header-text"},[a("h2",[t._v("Add new state")])]),a("template",{slot:"content"},[a("p",[t._v("Do you want to overwrite the current state or save as a new state?")]),a("p",[a("strong",[t._v("WARNING:")]),t._v(" Any changes within sub-blocks will cause their appropriate state to be overwritten with the content in this current state!")]),a("p",[a("strong",[t._v("IF CREATING NEW BLANK STATE:")]),t._v(" Any sub-blocks which use non-inline data (i.e. using a state) will need to be created and saved manually. They will not be blank")]),[a("div",{staticClass:"modal-root-add-state__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"modal-root-add-state__input__control modal-root-add-state__input__control--text",attrs:{type:"text",placeholder:'e.g. "longDescription", "empty"'},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},function(e){return t.validateFunction(t.name)}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addFunction(!0,t.name)}}}),a("span",{staticClass:"modal-root-add-state__input__label"},[t._v("New state name")])])]],2),a("template",{slot:"footer"},[a("button",{staticClass:"modal__button modal__button--green",attrs:{disabled:!t.isValid},on:{click:function(e){t.addFunction(!0,t.name),t.reset()}}},[t._v("Create duplicate")]),a("button",{staticClass:"modal__button modal__button--default",attrs:{disabled:!t.isValid},on:{click:function(e){t.addFunction(!1,t.name),t.reset()}}},[t._v("Create blank")]),a("button",{staticClass:"modal__button modal__button--red",on:{click:function(e){t.cancelFunction(),t.reset()}}},[t._v("Cancel")])])],2)},U=[],q={name:"modal-root-add-state",data:function(){return{name:""}},methods:{reset:function(){this.name.length>0&&(this.name="")}},components:{Modal:E["a"]},props:["isValid","validateFunction","addFunction","cancelFunction"]},G=q,z=(a("f16e"),Object(p["a"])(G,J,U,!1,null,"47fd6984",null)),W=z.exports,H={name:"json-data-editor",data:function(){return{initialPath:"",updateDisabled:!0,addStateModal:{isOpen:!1,isValid:!1},saveModal:{isOpen:!1}}},computed:{data:function(){return this.$store.state.data.root},block:function(){return this.$store.state.blocks.current},currentState:function(){return this.$store.state.state.current},toPreview:function(){return this.$store.state.toPreview},returnData:function(){return{path:this.$store.getters["state/previewUrlToDataPath"],previewPath:this.currentState.url,root:this.data,refs:this.$store.getters["state/convertToRefs"],wsId:this.$store.state.ws.id}}},methods:{preview:function(t,e){A["a"].preview(this.returnData)},toggleAddStateModal:function(){this.addStateModal.isOpen=!this.addStateModal.isOpen},toggleSaveModal:function(){this.saveModal.isOpen=!this.saveModal.isOpen},save:function(){A["a"].save(this.returnData).then(function(){}),this.toggleSaveModal()},stateNameIsValid:function(t){return this.addStateModal.isValid=t.length>0&&void 0==this.$store.state.blocks.current.states["/"+this.block.name+"_"+t],this.addStateModal.isValid},addNew:function(t,e){var a=this;if(this.stateNameIsValid(e)){var n=Object(N["a"])({},this.returnData),s=this.block.name+"_"+e;n.path=B["a"].buildNewBlockPath(this.currentState.name,s,n.path,".json"),n.previewPath=B["a"].buildNewBlockPath(this.currentState.name,s,n.previewPath,".html"),t?this.createNewState(n):A["a"].getEmpty(this.block.name).then(function(t){n.root=t.data,a.createNewState(n)})}},createNewState:function(t){A["a"].save(t).then(function(){})},updated:function(){this.$store.dispatch("data/save",this.data),A["a"].preview(this.returnData)},previewReset:function(){this.$store.commit("resetPreview")}},created:function(){this.debouncedUpdate=T.a.debounce(this.updated,500),this.debouncedPreview=T.a.debounce(this.previewReset,500)},watch:{toPreview:function(t){t&&(this.preview(),this.debouncedPreview())},data:{deep:!0,handler:function(){this.debouncedUpdate()}}},components:{ModalRootSaveState:V,ModalRootAddState:W}},K=H,Q=(a("b48c"),Object(p["a"])(K,j,I,!1,null,"aa936b8a",null)),X=Q.exports,Y={name:"tabs",computed:{navItems:function(){return this.$store.state.nav.items},navContext:function(){return this.$store.state.nav.context}},methods:{icon:function(t){var e="";switch(t.toLowerCase()){case"blocks":e="box";break;case"context":e="file-text";break;case"data":e="code";break;default:break}return e},isInContext:function(t,e){return t===e},setNavContext:function(t){this.$store.commit("nav/setCurrent",t)}},components:{TreeMenu:y,States:O,JsonDataEditor:X}},Z=Y,tt=(a("2dc8"),Object(p["a"])(Z,i,r,!1,null,"77fb4b22",null)),et=tt.exports,at={name:"yuzu-def-ui",data:function(){return{}},mounted:function(){this.$store.dispatch("blocks/load"),this.$store.dispatch("ws/setup")},methods:{},components:{Tabs:et}},nt=at,st=(a("5c0b"),Object(p["a"])(nt,s,o,!1,null,null,null)),ot=st.exports,it=a("07a4");n["a"].config.productionTip=!1,new n["a"]({store:it["a"],render:function(t){return t(ot)}}).$mount("#app"),n["a"].component("JsonDataProperty",a("71e3").default),n["a"].component("JsonDataCollapsibleProperty",a("ea02").default),n["a"].component("JsonDataBlockType",a("9ad0").default),n["a"].component("JsonDataObject",a("ccb8").default),n["a"].component("JsonDataText",a("5624").default),n["a"].filter("striphtml",function(t){var e=document.createElement("div");e.innerHTML=t;var a=e.textContent||e.innerText||"";return a})},5882:function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),s=a.n(n);s.a},"5e27":function(t,e,a){},"61ad":function(t,e,a){"use strict";var n=a("1867"),s=a.n(n);s.a},"6da3":function(t,e,a){},"71e3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"property-editor",class:"property-editor--depth-"+t.depth},[t.isArray(t.item)?a("div",{staticClass:"property-editor__section property-editor__section--array"},[a("json-data-array",{attrs:{items:t.item,depth:t.depth,absPath:t.absPath,relPath:t.relPath,blockName:t.blockName}})],1):t.isObject(t.item)?t._l(Object.keys(t.item),function(e){return a("div",{key:e},[t.toIgnore(e)?t._e():[t.isObject(t.item[e])?a("div",{staticClass:"property-editor__section property-editor__section--object"},[a("json-data-object",{attrs:{label:e,item:t.item[e],depth:t.depth,absPath:t.buildPathAbs(e,t.absPath),relPath:t.buildPathRel(e,t.relPath),parentState:t.parentState,blockName:t.blockName,ofType:t.ofType}})],1):t.isArray(t.item[e])?a("div",{staticClass:"property-editor__section property-editor__section--array"},[a("json-data-array",{attrs:{label:e,items:t.item[e],depth:t.depth,absPath:t.buildPathAbs(e,t.absPath),relPath:t.buildPathRel(e,t.relPath),blockName:t.blockName,ofType:t.ofType}})],1):t.isBoolean(t.item[e])?a("div",{staticClass:"property-editor__section property-editor__section--boolean",style:{"padding-left":t.depth+"rem"}},[a("json-data-boolean",{attrs:{label:e,item:t.item,depth:t.depth}})],1):t.isEnum(e)?a("div",{staticClass:"property-editor__section property-editor__section--property",style:{"padding-left":t.depth+"rem"}},[a("json-data-enum",{attrs:{label:e,item:t.item,depth:t.depth,path:t.buildPathRel(e,t.relPath),blockName:t.blockName}})],1):a("div",{staticClass:"property-editor__section property-editor__section--property",style:{"padding-left":t.depth+"rem"}},[a("json-data-text",{attrs:{label:e,item:t.item,depth:t.depth,absPath:t.buildPathAbs(e,t.absPath),relPath:t.buildPathRel(e,t.relPath)}})],1)]],2)}):t._e()],2)},s=[],o=(a("6762"),a("2fdb"),a("2ef0")),i=a.n(o),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"array-editor is-active",class:"array-editor--depth-"+t.depth},[t.label?a("div",{staticClass:"array-editor__title",style:{"padding-left":t.depth+"rem"}},[a("svg",{staticClass:"array-editor__title__icon feather"},[a("use",{attrs:{"xlink:href":"#folder"}})]),a("span",{staticClass:"array-editor__title__text"},[t._v("\n      "+t._s(t.label)+"\n    ")])]):t._e(),a("div",{staticClass:"array-editor__section"},[a("draggable",{attrs:{list:t.items,"ghost-class":"ghost",handle:".array-editor-actions__sort"},on:{end:t.handleMove}},t._l(t.items,function(e,n){return a("div",{key:n,staticClass:"array-editor__item"},[t.isRef(e)?a("json-data-object",{attrs:{label:t.refLabel(e),item:e,depth:t.depth+1,absPath:t.buildPath(n,t.absPath),relPath:t.relPath,isAnyOf:t.isAnyOf,ofType:t.ofType}},[a("json-data-array-actions",{attrs:{slot:"arrayActions",item:e,relPath:t.relPath,deleteFunction:t.setToDelete},slot:"arrayActions"})],1):t._e(),!t.isRef(e)&&t.isObject(e)?a("json-data-collapsible-property",{attrs:{label:t.label,item:e,depth:t.depth+1,absPath:t.buildPath(n,t.absPath),relPath:t.relPath,arrayIndex:n+1,originalIndex:t.originalIndexesArray.get(n)+1,blockName:t.blockName,ofType:t.ofType}},[a("json-data-array-actions",{attrs:{slot:"arrayActions",item:e,relPath:t.relPath,deleteFunction:t.setToDelete},slot:"arrayActions"})],1):t._e(),t.isRef(e)||t.isObject(e)?t._e():a("div",{staticClass:"array-editor__section--property",style:{"padding-left":t.depth+1+"rem"}},[a("json-data-text",{attrs:{index:n,item:t.items,depth:t.depth+1,absPath:t.buildPath(n,t.absPath),relPath:t.relPath}},[a("json-data-array-actions",{attrs:{slot:"arrayActions",item:e,relPath:t.relPath,deleteFunction:t.setToDelete},slot:"arrayActions"})],1)],1)],1)}),0),t.toDelete?a("modal-array-editor-delete",{attrs:{item:t.toDelete,deleteFunction:t.deleteItem,cancelFunction:t.resetToBeDeleted}}):t._e(),t.isAnyOf&&t.addBlockModal.isOpen?a("modal-array-editor-add",{attrs:{selected:t.addBlockModal.selected,options:t.addBlockModal.options,addFunction:t.addBlockItem,cancelFunction:t.toggleAddBlockModal}}):t._e(),a("div",{staticClass:"array-editor__section__footer",style:{"margin-left":t.depth+1+"rem"}},[t.isAnyOf?t._e():a("button",{staticClass:"array-editor__section__add",on:{click:t.addItem}},[a("svg",{staticClass:"array-editor__section__add__icon feather"},[a("use",{attrs:{"xlink:href":"#plus-square"}})]),a("span",{staticClass:"array-editor__section__add__text"},[t._v("\n          Add item\n        ")])]),t.isAnyOf?a("button",{staticClass:"array-editor__section__add",on:{click:t.toggleAddBlockModal}},[a("svg",{staticClass:"array-editor__section__add__icon feather"},[a("use",{attrs:{"xlink:href":"#plus-square"}})]),a("span",{staticClass:"array-editor__section__add__text"},[t._v("\n          Add block\n        ")])]):t._e()])],1)])},l=[],c=a("310e"),d=a.n(c),u=a("d722"),h=(a("c6e4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"array-editor-actions"},[a("a",{staticClass:"array-editor-actions__sort"},[a("svg",{staticClass:"array-editor-actions__sort__icon feather"},[a("use",{attrs:{"xlink:href":"#more-vertical"}})]),a("span",{staticClass:"array-editor-actions__sort__text"},[t._v("\n      Sort\n    ")])]),a("a",{staticClass:"array-editor-actions__delete",on:{click:function(e){return t.deleteFunction({item:t.item,path:t.relPath})}}},[a("svg",{staticClass:"array-editor-actions__delete__icon feather"},[a("use",{attrs:{"xlink:href":"#x-square"}})]),a("span",{staticClass:"array-editor-actions__delete__text"},[t._v("\n      Delete\n    ")])])])}),m=[],f={name:"json-data-array-actions",props:["deleteFunction","item","relPath"]},p=f,b=(a("f735"),a("2877")),v=Object(b["a"])(p,h,m,!1,null,"4aee6f36",null),g=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal-array-editor-add",on:{close:t.cancelFunction}},[a("template",{slot:"header-text"},[a("h2",[t._v("Add block to array")])]),a("template",{slot:"content"},[a("p",[t._v("Select block type to add to array")]),a("div",{staticClass:"modal-array-editor-add__select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"modal-array-editor-add__select__control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?a:a[0]}}},t._l(t.options,function(e){return a("option",{key:e,staticClass:"modal-array-editor-add__select__control__option",domProps:{value:e}},[t._v(t._s(e))])}),0),a("span",{staticClass:"modal-array-editor-add__select__label"},[t._v("Block")]),a("svg",{staticClass:"modal-array-editor-add__select__icon feather"},[a("use",{attrs:{"xlink:href":"#chevron-down"}})])])]),a("template",{slot:"footer"},[a("button",{staticClass:"modal__button modal__button--green",on:{click:function(e){return t.addFunction(t.selected)}}},[t._v("Add block")]),a("button",{staticClass:"modal__button modal__button--default",on:{click:t.cancelFunction}},[t._v("Cancel")])])],2)},y=[],C=a("4169"),x={name:"modal-array-editor-add",components:{Modal:C["a"]},props:["selected","options","addFunction","cancelFunction"]},w=x,P=(a("4dee"),Object(b["a"])(w,k,y,!1,null,"dec2b746",null)),S=P.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{on:{close:t.cancelFunction}},[a("template",{slot:"header-text"},[a("h2",[t._v("Confirm deletion")])]),a("template",{slot:"content"},[a("p",[t._v('Are you sure you want to delete this item from the "'+t._s(t.item.path)+'" array?')])]),a("template",{slot:"footer"},[a("button",{staticClass:"modal__button modal__button--red",on:{click:t.deleteFunction}},[t._v("Delete")]),a("button",{staticClass:"modal__button modal__button--default",on:{click:t.cancelFunction}},[t._v("Cancel")])])],2)},j=[],I={name:"modal-array-editor-delete",components:{Modal:C["a"]},props:["deleteFunction","cancelFunction","item"]},N=I,A=(a("51b0"),Object(b["a"])(N,O,j,!1,null,"26d939c8",null)),B=A.exports,$=(a("ac6a"),a("d225")),T=a("b0b4"),M=function(){function t(e){Object($["a"])(this,t),this.nextOriginalIndex=0,this.originalIndexesArray=this.generate(e)}return Object(T["a"])(t,[{key:"get",value:function(t){return void 0!=t?this.originalIndexesArray[t]:this.originalIndexesArray}},{key:"generate",value:function(t){var e=[];return t.forEach(function(t,a){e.push(a)}),this.nextOriginalIndex=t.length,e}},{key:"reorder",value:function(t,e){var a=this.originalIndexesArray[t];this.originalIndexesArray.splice(t,1),this.originalIndexesArray.splice(e,0,a)}},{key:"deleteElement",value:function(t){this.originalIndexesArray.splice(t,1)}},{key:"pushNewElement",value:function(){this.originalIndexesArray.push(this.nextOriginalIndex),this.nextOriginalIndex++}}]),t}(),F={name:"json-data-array",data:function(){return{toDelete:void 0,addBlockModal:{isOpen:!1,options:[],selected:""},originalIndexesArray:new M(this.items)}},computed:{paths:function(){return this.$store.state.data.paths},isAnyOf:function(){return!!this.$store.getters["schema/has"](this.blockName,"refs",this.relPath,this.ofType)&&(this.addBlockModal.options=this.$store.getters["schema/get"](this.blockName,"refs",this.relPath,this.ofType),this.addBlockModal.selected=this.addBlockModal.options[0],this.addBlockModal.options.length>1)}},methods:{handleMove:function(t){this.originalIndexesArray.reorder(t.oldIndex,t.newIndex)},isRef:function(t){return t.hasOwnProperty("$ref")},refLabel:function(t){return t["$ref"]},isObject:function(t){return _.isPlainObject(t)},setToDelete:function(t){this.toDelete=t},resetToBeDeleted:function(t){this.toDelete=void 0},deleteItem:function(){var t=this.$props.items.indexOf(this.toDelete.item);-1!==t&&this.$props.items.splice(t,1),this.resetToBeDeleted(),this.originalIndexesArray.deleteElement(t)},buildPath:function(t,e){return e+"["+t+"]"},toggleAddBlockModal:function(){this.addBlockModal.isOpen=!this.addBlockModal.isOpen},addItem:function(){var t=this;u["a"].getEmpty("/"+this.blockName,this.relPath).then(function(e){t.$props.items.push(e.data)}),this.addNewIndex()},addBlockItem:function(t){this.addBlockModal.isOpen=!1;var e={};e["$ref"]=t,this.$props.items.push(e),this.addNewIndex()},addNewIndex:function(){this.originalIndexesArray.pushNewElement()}},props:["label","items","depth","absPath","relPath","blockName","ofType"],components:{draggable:d.a,ModalArrayEditorAdd:S,ModalArrayEditorDelete:B,JsonDataArrayActions:g}},E=F,R=(a("275f"),Object(b["a"])(E,r,l,!1,null,"48284712",null)),D=R.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"boolean-editor",class:"boolean-editor--depth-"+t.depth},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item[t.label],expression:"item[label]"}],staticClass:"boolean-editor__control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item[t.label])?t._i(t.item[t.label],null)>-1:t.item[t.label]},on:{change:function(e){var a=t.item[t.label],n=e.target,s=!!n.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);n.checked?i<0&&t.$set(t.item,t.label,a.concat([o])):i>-1&&t.$set(t.item,t.label,a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.item,t.label,s)}}}),a("span",{staticClass:"boolean-editor__label"},[t._v("\n    "+t._s(t.label)+"\n  ")]),a("span",{staticClass:"boolean-editor__faux"},[a("svg",{staticClass:"boolean-editor__faux__icon feather"},[a("use",{attrs:{"xlink:href":"#check"}})])])])},V=[],J={name:"json-data-boolean",data:function(){return{}},methods:{},props:["label","item","depth"]},U=J,q=(a("22f6"),Object(b["a"])(U,L,V,!1,null,"55f09351",null)),G=q.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"enum-editor__select",class:"enum-editor--depth-"+t.depth},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.item[t.label],expression:"item[label]"}],staticClass:"enum-editor__select__control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.item,t.label,e.target.multiple?a:a[0])}}},t._l(t.enums,function(e){return a("option",{key:e,staticClass:"enum-editor__select__control__option",domProps:{value:e}},[t._v(t._s(e))])}),0),a("span",{staticClass:"enum-editor__select__label"},[t._v(t._s(t.label))]),a("svg",{staticClass:"enum-editor__select__icon feather"},[a("use",{attrs:{"xlink:href":"#chevron-down"}})])])},W=[],H={name:"json-data-enum",data:function(){return{}},computed:{enums:function(){return this.$store.getters["schema/get"](this.blockName,"enums",this.path)}},methods:{},props:["label","item","depth","path","blockName"]},K=H,Q=(a("ad90"),Object(b["a"])(K,z,W,!1,null,"ea876988",null)),X=Q.exports,Y={name:"json-data-property",data:function(){return{ignoreProperties:["_ref"]}},methods:{isObject:function(t){return i.a.isPlainObject(t)},isArray:function(t){return i.a.isArray(t)},isBoolean:function(t){return i.a.isBoolean(t)},isEnum:function(t){var e=this.buildPathRel(t,this.relPath);return this.$store.getters["schema/has"](this.blockName,"enums",e)},toIgnore:function(t){return i.a.includes(this.ignoreProperties,t)},buildPathAbs:function(t,e){return e+"/"+t},buildPathRel:function(t,e){return e?e+"/"+t:t}},props:["item","depth","absPath","relPath","blockName","parentState","ofType"],components:{JsonDataArray:D,JsonDataBoolean:G,JsonDataEnum:X}},Z=Y,tt=(a("d97a"),Object(b["a"])(Z,n,s,!1,null,"5785e4f9",null));e["default"]=tt.exports},8329:function(t,e,a){},"8fda":function(t,e,a){},"97b5":function(t,e,a){},"9ad0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.subBlock?a("div",{staticClass:"block-type-editor",class:"block-type-editor--depth-"+t.depth},[t.addModal.isOpen?a("modal-block-add-state",{attrs:{"v-if":t.addModal.isOpen,isValid:t.addModal.isValid,validateFunction:t.stateNameIsValid,addFunction:t.createNewState,cancelFunction:t.toggleAddModal}}):t._e(),a("div",{staticClass:"block-type-editor__select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.subBlock.state,expression:"subBlock.state"}],staticClass:"block-type-editor__select__control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.subBlock,"state",e.target.multiple?a:a[0])},function(e){return t.changeState()}]}},t._l(t.states,function(e){return a("option",{key:e.name,staticClass:"block-type-editor__select__control__option",domProps:{value:e.value}},[t._v(t._s(e.name))])}),0),a("span",{staticClass:"block-type-editor__select__label"},[t._v(t._s(t.blockName))]),a("svg",{staticClass:"block-type-editor__select__icon feather",class:{"is-hidden":this.active}},[a("use",{attrs:{"xlink:href":"#chevron-down"}})])]),a("a",{staticClass:"block-type-editor__button block-type-editor__button--link",attrs:{href:""}},[a("svg",{staticClass:"block-type-editor__button__icon feather"},[a("use",{attrs:{"xlink:href":"#link"}})]),a("span",{staticClass:"block-type-editor__button__text"},[t._v("Go to block")])]),a("button",{staticClass:"block-type-editor__button block-type-editor__button--add",on:{click:t.toggleAddModal}},[a("svg",{staticClass:"block-type-editor__button__icon feather"},[a("use",{attrs:{"xlink:href":"#plus"}})]),a("span",{staticClass:"block-type-editor__button__text"},[t._v("Add new state")])]),a("button",{staticClass:"block-type-editor__button block-type-editor__button--highlight",class:[{"is-active":this.highlighted}],on:{click:t.highlight}},[a("svg",{staticClass:"block-type-editor__button__icon feather"},[a("use",{attrs:{"xlink:href":"#crosshair"}})]),a("span",{staticClass:"block-type-editor__button__text"},[this.highlighted?[t._v("Remove highlighting")]:[t._v("Highlight block")]],2)])],1):t._e()},s=[],o=(a("7514"),a("7f7f"),a("d722")),i=a("c6e4"),r=a("2ef0"),l=a.n(r),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal-block-add-state",on:{close:function(e){t.cancelFunction(),t.reset()}}},[a("template",{slot:"header-text"},[a("h2",[t._v("Add new state")])]),a("template",{slot:"content"},[a("div",{staticClass:"modal-block-add-state__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"modal-block-add-state__input__control modal-block-add-state__input__control--text",attrs:{type:"text",placeholder:'e.g. "longDescription", "empty"'},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},function(e){return t.validateFunction(t.name)}],keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.addFunction(!0,t.name),t.reset()}}}),a("span",{staticClass:"modal-block-add-state__input__label"},[t._v("New state name")])])]),a("template",{slot:"footer"},[a("button",{staticClass:"modal__button modal__button--green",attrs:{disabled:!t.isValid},on:{click:function(e){t.addFunction(!0,t.name),t.reset()}}},[t._v("Create duplicate")]),a("button",{staticClass:"modal__button modal__button--default",attrs:{disabled:!t.isValid},on:{click:function(e){t.addFunction(!1,t.name),t.reset()}}},[t._v("Create blank")]),a("button",{staticClass:"modal__button modal__button--red",on:{click:function(e){t.cancelFunction(),t.reset()}}},[t._v("Cancel")])])],2)},d=[],u=a("4169"),h={name:"modal-block-add-state",data:function(){return{name:""}},methods:{reset:function(){this.name.length>0&&(this.name="")}},props:["isValid","validateFunction","addFunction","cancelFunction"],components:{Modal:u["a"]}},m=h,f=(a("0b1c"),a("2877")),p=Object(f["a"])(m,c,d,!1,null,"3313b888",null),_=p.exports,b={name:"json-data-block-type",data:function(){return{active:!0,highlighted:!1,addModal:{isOpen:!1,name:"",isValid:!1}}},computed:{states:function(){return this.$store.getters["blockStates/get"](this.blockName)}},mounted:function(){this.$store.dispatch("blockStates/loadStates",{block:this.blockName,state:this.subBlock.state})},beforeDestroy:function(){this.highlighted&&(this.highlighted=!1,o["a"].setActive(this.absPath,this.highlighted))},methods:{toggleAddModal:function(){this.addModal.isOpen=!this.addModal.isOpen},highlight:function(){this.highlighted=!this.highlighted,o["a"].setActive(this.absPath,this.highlighted)},addNewStateOption:function(t){this.$store.dispatch("blockStates/addNewState",{name:this.addModal.name,value:t,block:this.blockName}),this.subBlock.state=t},changeState:function(){var t=this.subBlock.state,e=this;this.$store.getters["state/has"](t)?this.saveNewItemState(t):o["a"].get(t).then(function(a){e.addRef(t,a.data),e.saveNewItemState(t)})},stateNameIsValid:function(t){return this.addModal.isValid=t.length>0&&!this.states.find(function(e){return e.name===t}),this.addModal.isValid},createNewState:function(t,e){var a=this;if(this.addModal.name=e,this.stateNameIsValid(e)){var n=i["a"].createNewStateName(this.subBlock.state,this.addModal.name);if(this.addModal.isOpen=!1,t){var s=l.a.cloneDeep(this.$store.getters["state/get"](this.subBlock.state));this.saveNewState(n,s)}else o["a"].getEmpty(this.blockName).then(function(t){a.saveNewState(n,t.data)})}},saveNewState:function(t,e){this.addRef(t,e),this.saveNewItemState(t),this.addNewStateOption(t)},saveNewItemState:function(t){this.item["$ref"]=t},addRef:function(t,e){var a={name:t,state:e};this.$store.dispatch("state/add",a)}},props:["item","depth","subBlock","blockName","absPath"],components:{ModalBlockAddState:_}},v=b,g=(a("f951"),Object(f["a"])(v,n,s,!1,null,"1373155a",null));e["default"]=g.exports},"9c3e":function(t,e,a){"use strict";var n=a("4a6d"),s=a.n(n);s.a},a30d:function(t,e,a){},a7b4:function(t,e,a){},ad90:function(t,e,a){"use strict";var n=a("6da3"),s=a.n(n);s.a},b0cb:function(t,e,a){},b48c:function(t,e,a){"use strict";var n=a("b0cb"),s=a.n(n);s.a},baa1:function(t,e,a){"use strict";var n=a("190b"),s=a.n(n);s.a},c6e4:function(t,e,a){"use strict";a("a481"),a("28a5"),a("386d"),a("7f7f"),a("456d"),a("ac6a");var n=a("2ef0"),s=a.n(n),o=(a("df7c"),a("3e8f"),function t(e,a,n,o){Object.keys(e).forEach(function(o){var i=e[o];s.a.isPlainObject(i)||s.a.isArray(i)?s.a.isPlainObject(i)&&t(i,a,n,o):o===l(a)&&(n.block={name:c(Object.keys(e)[0]),states:e},n.state={name:o,url:i})})}),i=function(t){var e=_(t);return"".concat(e.type,"/").concat(e.area).concat(e.area?"/":"").concat(e.name,"/data/").concat(e.prefix).concat(e.name).concat(e.state,".json")},r=function(){var t=_(window.parent.location.search);return t.prefix+t.name+t.state},l=function(t){var e=t.charAt(0);return"/"!=e&&(t="/"+t),t},c=function(t){var e=t.charAt(0);return"/"==e&&(t=t.substring(1)),t},d=function(t){return t.split("^")[0]},u=function(t){return t=c(t),t.split("_")[0]},h=function(t){return t.split("_")[0]},m=function(t,e,a,n){return t=c(t),a.replace(t+n,e+n)},f=function(t){var e=h(t);return t.replace(e+"_","")},p=function(t,e){var a=h(t);return a+"_"+e},_=function(t){var e=new URLSearchParams(t),a={};return a.type=e.get("type"),a.area=e.has("area")?e.get("area"):"",a.prefix="blocks"==a.type?"par":"",a.name=e.get("name"),a.state=e.has("state")?"_"+e.get("state"):"",a};e["a"]={convertPreviewToDataPath:i,getBlockAndState:o,getRoute:r,addPrefix:l,removeOfType:d,removePrefix:c,blockFromState:u,defaultFromState:h,buildNewBlockPath:m,getStateSuffix:f,createNewStateName:p}},cb50:function(t,e,a){},ccb8:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"object-editor",class:[{"is-active":this.active},"object-editor--depth-"+t.depth]},[a("div",{staticClass:"object-editor__title",style:{"padding-left":t.depth+"rem"},on:{click:t.toggleActive}},[a("svg",{staticClass:"object-editor__title__icon feather",class:{"is-hidden":this.active}},[a("use",{attrs:{"xlink:href":"#plus-square"}})]),a("svg",{staticClass:"object-editor__title__icon feather",class:{"is-hidden":!this.active}},[a("use",{attrs:{"xlink:href":"#minus-square"}})]),a("span",{staticClass:"object-editor__title__text"},[t._v(t._s(t._f("striphtml")(t.resolvedLabel)))])]),t.active&&t.isSubBlock?a("json-data-block-type",{attrs:{item:t.item,depth:t.depth+1,blockName:t.newBlockName,subBlock:t.subBlockMeta,absPath:t.absPath}}):t._e(),t.isSubBlock&&t.active?t._e():t._t("arrayActions"),t.active?a("div",{staticClass:"object-editor__section"},[t.isSubBlock?a("json-data-property",{attrs:{item:t.subBlockState,depth:t.depth+1,absPath:t.absPath,relPath:"",blockName:t.newBlockName,parentState:t.subBlockRef,ofType:t.newOfType}}):t._e(),t.isSubBlock||t.isInlineBlock?t._e():a("json-data-property",{attrs:{item:t.item,depth:t.depth+1,absPath:t.absPath,relPath:t.relPath,blockName:t.newBlockName,parentState:t.parentState,ofType:t.newOfType}}),!t.isSubBlock&&t.isInlineBlock?a("json-data-property",{attrs:{item:t.inlineBlockState,depth:t.depth+1,absPath:t.absPath,relPath:"",blockName:t.newBlockName,parentState:t.parentState,ofType:t.newOfType}}):t._e()],1):t._e()],2)},s=[],o=(a("d722"),a("c6e4")),i=(a("3e8f"),{name:"json-data-object",data:function(){return{active:!1,highlighted:!1,subBlockMeta:{name:"",defaultState:"",state:""},inlineBlockMeta:{name:""},resolvedLabel:"",newOfType:"",newBlockName:""}},computed:{isSubBlock:function(){return this.item.hasOwnProperty("$ref")},subBlockRef:function(){return this.item["$ref"]},subBlockState:function(){return this.$store.getters["state/get"](this.subBlockRef)},isInlineBlock:function(){return this.$store.getters["schema/has"](this.blockName,"refs",this.relPath,this.ofType)},inlineBlockRef:function(){var t=this.$store.getters["schema/get"](this.blockName,"refs",this.relPath,this.ofType)[0];return o["a"].removeOfType(t)},inlineBlockState:function(){return this.item?this.item:this.$store.getters["state/get"](this.inlineBlockRef)}},mounted:function(){if(this.newBlockName=this.blockName,this.newOfType=this.ofType,this.isSubBlock&&(this.newBlockName=o["a"].blockFromState(this.subBlockRef),this.subBlockMeta.defaultState=o["a"].defaultFromState(this.subBlockRef),this.subBlockMeta.state=this.subBlockRef,this.$store.dispatch("schema/load",this.newBlockName),this.$store.dispatch("state/load",this.subBlockRef)),this.isInlineBlock){this.newBlockName=o["a"].blockFromState(this.inlineBlockRef),this.$store.dispatch("schema/load",this.inlineBlockRef),this.$store.dispatch("state/load",this.inlineBlockRef);var t=this.$store.getters["schema/getOfType"]({block:this.blockName,path:this.relPath});t&&(this.newOfType=t)}this.resolvedLabel=this.label,this.isAnyOf&&this.subBlockState&&this.setAnyOfLabel()},methods:{toggleActive:function(){this.active=!this.active},setAnyOfLabel:function(){if(this.subBlockState){var t=this;this.$store.dispatch("itemTitle/get",{item:this.subBlockState,action:function(e,a){t.label===t.subBlockRef&&(t.resolvedLabel=a[e]+" ("+t.label+")")}})}},updated:function(){this.isSubBlock&&(this.$store.dispatch("state/update",{name:this.subBlockRef,state:this.subBlockState}),this.$store.commit("triggerPreview")),this.isAnyOf&&this.setAnyOfLabel()}},created:function(){this.debouncedUpdate=_.debounce(this.updated,500)},watch:{subBlockState:{deep:!0,handler:function(){this.debouncedUpdate()}}},props:["label","item","depth","absPath","relPath","blockName","isAnyOf","parentState","ofType"]}),r=i,l=(a("e696"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"b5f6605a",null);e["default"]=c.exports},d722:function(t,e,a){"use strict";var n=a("bc3a"),s=a.n(n),o=a("07a4"),i=a("c6e4"),r="http://localhost:3000/api/",l="/_client/templatePaths.json";e["a"]={getPreviews:function(){return s.a.get(l)},get:function(t){return s.a.get(r+"get/"+i["a"].removePrefix(t))},getChildStates:function(t){return s.a.get(r+"getChildStates/"+i["a"].removePrefix(t))},getRefPaths:function(t){return s.a.get(r+"getRefPaths/"+i["a"].removePrefix(t))},getEmpty:function(t,e){var a=r+"getEmpty/"+i["a"].blockFromState(t,!0);return e&&(a=a+"/"+encodeURIComponent(e)),s.a.get(a)},setActive:function(t,e){s.a.get(r+"setActive/"+o["a"].state.ws.id+"/"+encodeURIComponent(t)+"/"+e)},preview:function(t){return s.a.post(r+"preview",t)},save:function(t){return s.a.post(r+"save",t)},getImages:function(){return s.a.get(r+"getImages/")}}},d97a:function(t,e,a){"use strict";var n=a("97b5"),s=a.n(n);s.a},e696:function(t,e,a){"use strict";var n=a("4ae8"),s=a.n(n);s.a},ea02:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapse",class:[{"is-active":t.isOpen},"collapse--depth-"+t.depth]},[a("span",{staticClass:"collapse__title",style:{"padding-left":t.depth+"rem"},on:{click:t.open}},[a("svg",{staticClass:"collapse__title__icon feather",class:{"is-hidden":t.isOpen}},[a("use",{attrs:{"xlink:href":"#plus-square"}})]),a("svg",{staticClass:"collapse__title__icon feather",class:{"is-hidden":!t.isOpen}},[a("use",{attrs:{"xlink:href":"#minus-square"}})]),a("span",{staticClass:"collapse__title__text"},[t._v("\n      "+t._s(t.guessCollapsedTitle)+"\n    ")])]),t._t("arrayActions"),t.isOpen?a("div",{staticClass:"collapse__section"},[a("json-data-property",{attrs:{item:t.item,depth:t.depth+1,absPath:t.absPath,relPath:t.relPath,blockName:t.blockName,ofType:t.ofType}})],1):t._e()],2)},s=[],o=(a("2ef0"),a("6e96")),i=a.n(o),r={name:"json-data-collapsible-property",data:function(){return{isOpen:!1,guesses:["type","title"]}},computed:{guessCollapsedTitle:function(){var t=i.a.singularize(this.label)+" "+this.originalIndex;return this.$store.dispatch("itemTitle/get",{item:this.item,action:function(e,a){t=a[e]}}),t}},methods:{open:function(){this.$data.isOpen=!this.$data.isOpen}},props:["label","item","depth","absPath","relPath","arrayIndex","originalIndex","blockName","ofType"]},l=r,c=(a("baa1"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"40ec1f26",null);e["default"]=d.exports},ecbb:function(t,e,a){},ef2e:function(t,e,a){},f16e:function(t,e,a){"use strict";var n=a("ecbb"),s=a.n(n);s.a},f477:function(t,e,a){},f735:function(t,e,a){"use strict";var n=a("a7b4"),s=a.n(n);s.a},f951:function(t,e,a){"use strict";var n=a("a30d"),s=a.n(n);s.a}});
//# sourceMappingURL=app.fc4f18b0.js.map